{% extends "posApp/base.html" %}
{% block pageContent %}
<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
    
    <div class="card p-4">

   <h3 class="mb-4">Add New Stock Entry</h3>
    <form method="post" class="needs-validation" novalidate>
        {% csrf_token %}
        
        {% if form.errors %}
            <div class="alert alert-danger">Please fix the errors below.</div>
        {% endif %}
        
        <div class="form-group mb-3">
    <label for="{{ form.product.id_for_label }}" >Product</label>
    {{ form.product }}
    {% if form.product.errors %}
        <div class="invalid-feedback d-block">
            {{ form.product.errors.as_text }}
        </div>
    {% endif %}  
</div>

        
       <div class="form-group mb-3">
    <label for="{{ form.quantity.id_for_label }}" class="form-label">Quantity</label>
    {{ form.quantity }}
    {% if form.quantity.errors %}
        <div class="invalid-feedback d-block">
            {{ form.quantity.errors.as_text }}
        </div>
    {% endif %}
</div>

<div class="form-group mb-3">
    <label for="{{ form.cost_price.id_for_label }}" class="form-label">Cost Price</label>
    {{ form.cost_price }}
    {% if form.cost_price.errors %}
        <div class="invalid-feedback d-block">
            {{ form.cost_price.errors.as_text }}
        </div>
    {% endif %}
</div>

<div class="form-group mb-3">
    <label for="{{ form.date_received.id_for_label }}" class="form-label">Date Received</label>
    {{ form.date_received }}
    {% if form.date_received.errors %}
        <div class="invalid-feedback d-block">
            {{ form.date_received.errors.as_text }}
        </div>
    {% endif %}
</div>

<div class="form-group mb-3">
    <label for="{{ form.store.id_for_label }}" class="form-label">Store</label>
    {{ form.store }}
    {% if form.store.errors %}
        <div class="invalid-feedback d-block">
            {{ form.store.errors.as_text }}
        </div>
    {% endif %}
</div>


        <button type="submit" class="btn btn-primary">Add Stock</button>
        <a href="{% url 'stock_entry_list' %}" class="btn btn-secondary ms-2">Cancel</a>
    </form>
</div>
 </div>
<script>
// Bootstrap 5 validation
(() => {
  'use strict'
  const forms = document.querySelectorAll('.needs-validation')
  Array.from(forms).forEach(form => {
    form.addEventListener('submit', event => {
      if (!form.checkValidity()) {
        event.preventDefault()
        event.stopPropagation()
      }
      form.classList.add('was-validated')
    }, false)
  })
})()
</script>
{% endblock pageContent %}
